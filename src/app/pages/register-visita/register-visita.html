<div class="page-container">

  <header class="page-header">
    <div class="header-title">
      <h1>Registro de Visitantes</h1>
      <p>Cadastrar nova visita</p>
    </div>

    <div class="header-actions">
      <span class="user-tag">
        <i class="fas fa-user-circle"></i> {{ userName }}
      </span>

      <button class="btn btn-secondary" (click)="voltadashboard()">
        <i class="fas fa-arrow-left"></i> Voltar
      </button>

      <button class="btn btn-logout" (click)="logout()">
        <i class="fas fa-sign-out-alt"></i> Sair
      </button>
    </div>
  </header>

  <main class="page-content">

    <!-- ETAPA 1 - VISITANTE -->
    <form *ngIf="etapa === 1" [formGroup]="formVisitante" (ngSubmit)="registrarVisitante()">

      <div class="form-section">

        <div class="card">
          <div class="card-header">
            <i class="fas fa-user-circle"></i>
            <div>
              <h2>Dados do Visitante</h2>
              <p>Informações pessoais do visitante</p>
            </div>
          </div>
          <div class="form-group">
            <label>Nome Completo *</label>
            <input type="text" class="form-control" formControlName="nomeCompleto" placeholder="Digite o nome completo">
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>RG/Documento *</label>
              <input type="text" class="form-control" formControlName="documentoIdentidade">
            </div>

            <div class="form-group">
              <label>CPF *</label>
              <input type="text" class="form-control" formControlName="cpf">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Sexo *</label>
              <select class="form-control" formControlName="sexo">
                <option value="">Selecione...</option>
                <option value="Masculino">Masculino</option>
                <option value="Feminino">Feminino</option>
                <option value="Outro">Outro</option>
              </select>
            </div>

            <div class="form-group">
              <label>Data de Nascimento *</label>
              <input type="date" class="form-control" formControlName="dataNascimento">
            </div>
          </div>

          <div class="form-row">


            <div class="form-group">
              <label>Telefone</label>
              <input type="tel" class="form-control" formControlName="telefone">
            </div>
          </div>



          <div class="form-group form-group-full">
            <label>Foto do Visitante (Opcional)</label>
            <div class="custom-file-upload">
              <input type="file" id="foto" (change)="onFileSelected($event)" hidden>
              <label for="foto" class="file-upload-label">
                <i class="fas fa-camera"></i>
                <span>Adicionar Foto</span>
                <small>JPG, PNG até 5MB</small>
              </label>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" routerLink="/dashboard">Cancelar</button>

          <button type="submit" class="btn btn-primary">
            <i class="fas fa-check"></i> Continuar
          </button>
        </div>

      </div>
    </form>

    <!-- ETAPA 2 - VISITA -->
    <form *ngIf="etapa === 2" [formGroup]="formVisita" (ngSubmit)="registrarVisita()">

      <div class="form-section">

        <div class="card">
          <div class="card-header">
            <i class="fas fa-building"></i>
            <div>
              <h2>Dados da Visita</h2>
              <p>Informações sobre a visita</p>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Pessoa a Visitar *</label>
              <input type="text" class="form-control" formControlName="pessoaVisitada" placeholder="Nome da pessoa">
            </div>

            <div class="form-group">
              <label>Departamento/Setor</label>
              <input type="text" class="form-control" formControlName="departamento" placeholder="Ex: Recursos Humanos">
            </div>
          </div>

          <div class="form-group form-group-full">
            <label>Motivo da Visita *</label>
            <textarea rows="3" class="form-control" formControlName="motivo"
              placeholder="Descreva o motivo da visita"></textarea>
          </div>

          <div class="form-group form-group-full">
            <label>Observações</label>
            <textarea rows="3" class="form-control" formControlName="observacoes"
              placeholder="Observações adicionais"></textarea>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" (click)="voltar()">Voltar</button>

          <button class="btn btn-primary" >
            <i class="fas fa-check"></i> Finalizar
          </button>
        </div>

      </div>
    </form>



  </main>
</div>